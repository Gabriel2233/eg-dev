# Migration `20201208003049-add-user-idea-migration`

This migration has been generated by Gabriel Tiso at 12/7/2020, 9:30:49 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "User" (
    "uid" TEXT NOT NULL,
    "email" TEXT NOT NULL,
    "name" TEXT NOT NULL,
    "provider" TEXT NOT NULL,
    "photoUrl" TEXT NOT NULL,

    PRIMARY KEY ("uid")
)

CREATE TABLE "Idea" (
"id" SERIAL,
    "name" TEXT NOT NULL,
    "briefDescription" TEXT NOT NULL,
    "richDescription" TEXT NOT NULL,
    "difficulty" TEXT NOT NULL,
    "techs" TEXT[],
    "demo_url" TEXT,
    "demo_placeholder" TEXT,
    "userUid" TEXT NOT NULL,

    PRIMARY KEY ("id")
)

CREATE UNIQUE INDEX "User.email_unique" ON "User"("email")

CREATE UNIQUE INDEX "Idea.userUid_unique" ON "Idea"("userUid")

ALTER TABLE "Idea" ADD FOREIGN KEY("userUid")REFERENCES "User"("uid") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201208003049-add-user-idea-migration
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,30 @@
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model User {
+  uid      String @id
+  email    String @unique
+  name     String
+  provider String
+  photoUrl String
+  ideas    Idea[]
+}
+
+model Idea {
+  id               Int      @id @default(autoincrement())
+  name             String
+  briefDescription String
+  richDescription  String
+  difficulty       String
+  techs            String[]
+  demo_url         String?
+  demo_placeholder String?
+  user             User     @relation(fields: [userUid], references: [uid])
+  userUid          String   @unique
+}
```


